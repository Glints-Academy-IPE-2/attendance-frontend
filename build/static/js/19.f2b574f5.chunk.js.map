{"version":3,"sources":["views/reset/ResetPassword.js"],"names":["Reset","query","URLSearchParams","useLocation","search","useState","isResponding","setIsResponding","responseMessage","setResponseMessage","responseType","setResponseType","isLoading","setIsLoading","validationSchema","Yup","shape","password","required","min","max","confirmPassword","oneOf","useForm","resolver","yupResolver","register","handleSubmit","reset","errors","formState","className","style","backgroundColor","md","onSubmit","data","email","get","token","AuthServices","resetPassword","then","res","catch","err","response","errorMessage","fontWeight","color","onClick","closeButton","htmlFor","opacity","name","type","message","border","width","disabled","size","to"],"mappings":"sRAyLeA,UA7JD,WACZ,IAAIC,EAJG,IAAIC,gBAAgBC,cAAcC,QAMzC,EAAwCC,oBAAS,GAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA8CF,mBAAS,IAAvD,mBAAOG,EAAP,KAAwBC,EAAxB,KACA,EAAwCJ,mBAAS,IAAjD,mBAAOK,EAAP,KAAqBC,EAArB,KACA,EAAkCN,oBAAS,GAA3C,mBAAOO,EAAP,KAAkBC,EAAlB,KAEMC,EAAmBC,MAAaC,MAAM,CAC1CC,SAAUF,MACPG,SAAS,wBACTC,IAAI,EAAG,0CACPC,IAAI,GAAI,0CACXC,gBAAiBN,MACdG,SAAS,gCACTI,MAAM,CAACP,IAAQ,YAAa,MAAO,qCAGxC,EAKIQ,YAAQ,CACVC,SAAUC,YAAYX,KALtBY,EADF,EACEA,SACAC,EAFF,EAEEA,aACAC,EAHF,EAGEA,MACaC,EAJf,EAIEC,UAAaD,OA2Bf,OACE,qBACEE,UAAU,qDACVC,MAAO,CAAEC,gBAAiB,SAF5B,SAIE,cAAC,IAAD,UACE,cAAC,IAAD,CAAMF,UAAU,yBAAhB,SACE,cAAC,IAAD,CAAMG,GAAG,IAAT,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOH,UAAU,MAAjB,SACE,cAAC,IAAD,UACE,uBAAMI,SAAUR,GAjCf,SAACS,GAChBvB,GAAa,GAEb,IAAMwB,EAAQpC,EAAMqC,IAAI,SAClBC,EAAQtC,EAAMqC,IAAI,SAExBE,IAAaC,cAAcJ,EAAOE,EAAOH,EAAKnB,UAC3CyB,MAAK,SAACC,GACLf,IACArB,GAAgB,GAChBI,EAAgB,WAChBF,EAAmB,8BACnBI,GAAa,MAEd+B,OAAM,SAACC,GACNtC,GAAgB,GAChBI,EAAgB,UAChBF,EAAmBoC,EAAIC,SAASV,KAAKW,cACrClC,GAAa,SAeH,UACE,oBACEkB,UAAU,mBACVC,MAAO,CAAEgB,WAAY,QAFvB,4BAMC1C,GACC,cAAC,IAAD,CACE2C,MAAOvC,EACPwC,QAAS,WACP3C,GAAgB,IAElB4C,aAAW,EALb,SAOG3C,IAGL,eAAC,IAAD,CAAYuB,UAAU,OAAtB,UACE,cAAC,IAAD,CAAQqB,QAAQ,WAAWpB,MAAO,CAAEqB,QAAS,OAA7C,0BAGA,+CACEC,KAAK,WACLC,KAAK,YACD7B,EAAS,aAHf,IAIEK,UAAS,uBACPF,EAAOZ,SAAW,aAAe,OAGrC,qBAAKc,UAAU,mBAAf,SACGF,EAAOZ,SAAWY,EAAOZ,SAASuC,QAAU,QAGjD,eAAC,IAAD,CAAYzB,UAAU,OAAtB,UACE,cAAC,IAAD,CACEqB,QAAQ,mBACRpB,MAAO,CAAEqB,QAAS,OAFpB,kCAMA,+CACEC,KAAK,kBACLC,KAAK,YACD7B,EAAS,oBAHf,IAIEK,UAAS,uBACPF,EAAOR,gBAAkB,aAAe,OAG5C,qBAAKU,UAAU,mBAAf,SACGF,EAAOR,gBACJQ,EAAOR,gBAAgBmC,QACvB,QAGR,cAAC,IAAD,UACE,eAAC,IAAD,WACE,eAAC,IAAD,CACEzB,UAAU,YACVf,MAAM,OACNgB,MAAO,CACLC,gBAAiB,UACjBwB,OAAQ,UACRR,MAAO,QACPS,MAAO,QAETH,KAAK,SACLI,SAAU/C,EAVZ,UAYGA,GACC,cAAC,IAAD,CACEqC,MAAM,QACNW,KAAK,KACL7B,UAAU,SAGd,4CAEF,eAAC,IAAD,CAAWA,UAAU,wBAArB,wBAEE,cAAC,IAAD,CAAM8B,GAAG,SAAS7B,MAAO,CAAEiB,MAAO,WAAlC","file":"static/js/19.f2b574f5.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardGroup,\r\n  CCol,\r\n  CContainer,\r\n  CRow,\r\n  CLabel,\r\n  CFormGroup,\r\n  CFormText,\r\n  CSpinner,\r\n  CAlert,\r\n} from \"@coreui/react\";\r\n\r\nimport { useLocation, Link } from \"react-router-dom\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as Yup from \"yup\";\r\n\r\nimport AuthServices from \"../../services/auth.service\";\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst Reset = () => {\r\n  let query = useQuery();\r\n\r\n  const [isResponding, setIsResponding] = useState(false);\r\n  const [responseMessage, setResponseMessage] = useState(\"\");\r\n  const [responseType, setResponseType] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    password: Yup.string()\r\n      .required(\"Password is required\")\r\n      .min(6, \"Password must be at least 6 characters\")\r\n      .max(40, \"Password must not exceed 40 characters\"),\r\n    confirmPassword: Yup.string()\r\n      .required(\"Confirm Password is required\")\r\n      .oneOf([Yup.ref(\"password\"), null], \"Confirm Password does not match\"),\r\n  });\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n\r\n  const onSubmit = (data) => {\r\n    setIsLoading(true);\r\n\r\n    const email = query.get(\"email\");\r\n    const token = query.get(\"token\");\r\n\r\n    AuthServices.resetPassword(email, token, data.password)\r\n      .then((res) => {\r\n        reset();\r\n        setIsResponding(true);\r\n        setResponseType(\"success\");\r\n        setResponseMessage(\"Reset password successfull\");\r\n        setIsLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setIsResponding(true);\r\n        setResponseType(\"danger\");\r\n        setResponseMessage(err.response.data.errorMessage);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"c-app c-default-layout flex-row align-items-center\"\r\n      style={{ backgroundColor: \"white\" }}\r\n    >\r\n      <CContainer>\r\n        <CRow className=\"justify-content-center\">\r\n          <CCol md=\"6\">\r\n            <CCardGroup>\r\n              <CCard className=\"p-4\">\r\n                <CCardBody>\r\n                  <form onSubmit={handleSubmit(onSubmit)}>\r\n                    <h1\r\n                      className=\"text-center mb-4\"\r\n                      style={{ fontWeight: \"bold\" }}\r\n                    >\r\n                      Reset Password\r\n                    </h1>\r\n                    {isResponding && (\r\n                      <CAlert\r\n                        color={responseType}\r\n                        onClick={() => {\r\n                          setIsResponding(false);\r\n                        }}\r\n                        closeButton\r\n                      >\r\n                        {responseMessage}\r\n                      </CAlert>\r\n                    )}\r\n                    <CFormGroup className=\"my-2\">\r\n                      <CLabel htmlFor=\"password\" style={{ opacity: \"50%\" }}>\r\n                        New Password\r\n                      </CLabel>\r\n                      <input\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        {...register(\"password\")}\r\n                        className={`form-control ${\r\n                          errors.password ? \"is-invalid\" : \"\"\r\n                        }`}\r\n                      />\r\n                      <div className=\"invalid-feedback\">\r\n                        {errors.password ? errors.password.message : \"\"}\r\n                      </div>\r\n                    </CFormGroup>\r\n                    <CFormGroup className=\"my-2\">\r\n                      <CLabel\r\n                        htmlFor=\"confirm-password\"\r\n                        style={{ opacity: \"50%\" }}\r\n                      >\r\n                        Confirm New Password\r\n                      </CLabel>\r\n                      <input\r\n                        name=\"confirmPassword\"\r\n                        type=\"password\"\r\n                        {...register(\"confirmPassword\")}\r\n                        className={`form-control ${\r\n                          errors.confirmPassword ? \"is-invalid\" : \"\"\r\n                        }`}\r\n                      />\r\n                      <div className=\"invalid-feedback\">\r\n                        {errors.confirmPassword\r\n                          ? errors.confirmPassword.message\r\n                          : \"\"}\r\n                      </div>\r\n                    </CFormGroup>\r\n                    <CRow>\r\n                      <CCol>\r\n                        <CButton\r\n                          className=\"py-2 mt-2\"\r\n                          shape=\"pill\"\r\n                          style={{\r\n                            backgroundColor: \"#6C63FF\",\r\n                            border: \"#6C63FF\",\r\n                            color: \"white\",\r\n                            width: \"100%\",\r\n                          }}\r\n                          type=\"submit\"\r\n                          disabled={isLoading}\r\n                        >\r\n                          {isLoading && (\r\n                            <CSpinner\r\n                              color=\"white\"\r\n                              size=\"sm\"\r\n                              className=\"mr-1\"\r\n                            />\r\n                          )}\r\n                          <span>Reset</span>\r\n                        </CButton>\r\n                        <CFormText className=\"mb-2 mt-2 text-center\">\r\n                          Back to&nbsp;\r\n                          <Link to=\"/login\" style={{ color: \"#6C63FF\" }}>\r\n                            Login\r\n                          </Link>\r\n                        </CFormText>\r\n                      </CCol>\r\n                    </CRow>\r\n                  </form>\r\n                </CCardBody>\r\n              </CCard>\r\n            </CCardGroup>\r\n          </CCol>\r\n        </CRow>\r\n      </CContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reset;\r\n"],"sourceRoot":""}