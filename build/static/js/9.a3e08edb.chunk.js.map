{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","services/auth.header.js","services/user.services.js","views/role/admin/approve/ApproveUsers.js"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","authHeader","user","JSON","parse","localStorage","getItem","token","axios","require","API_URL","UserServices","getAllUsers","get","headers","approveUser","verifiedToken","deleteUser","id","delete","getAllAttendance","fields","ApproveUsers","useState","notApprovedUsers","setNotApprovedUsers","modal","setModal","modalType","setModalType","modalMessage","setModalMessage","modalButton","setModalButton","setToken","userId","setUserId","alertType","setAlertType","alertMessage","setAlertMessage","isLoading","setIsLoading","getAlluser","then","res","filteredUsers","data","users","rows","filter","isApproved","modalHandler","type","useEffect","color","style","backgroundColor","fontWeight","borderRadius","marginTop","closeButton","items","bordered","itemsPerPage","pagination","scopedSlots","action","item","shape","size","className","onClick","show","onClose","catch"],"mappings":"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","file":"static/js/9.a3e08edb.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function authHeader() {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  if (user && user.token) {\n    return { \"x-token\": user.token };\n  } else {\n    return {};\n  }\n}\n","import authHeader from \"./auth.header\";\nconst axios = require(\"axios\");\n\nconst API_URL = \"https://ipe-attendance.herokuapp.com/api/admin/\";\n\nconst getAllUsers = () => {\n  return axios.get(API_URL + \"get-user\", { headers: authHeader() });\n};\n\nconst approveUser = verifiedToken => {\n  return axios.get(API_URL + \"approve-user\" + verifiedToken, {\n    headers: authHeader()\n  });\n};\n\nconst deleteUser = id => {\n  return axios.delete(API_URL + \"delete-user\" + id, {\n    headers: authHeader()\n  });\n};\n\nconst getAllAttendance = () => {\n  return axios.get(API_URL + \"get-attendance\", {\n    headers: authHeader()\n  });\n};\n\nconst UserServices = {\n  getAllUsers,\n  approveUser,\n  deleteUser,\n  getAllAttendance\n};\n\nexport default UserServices;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CAlert,\n  CSpinner\n} from \"@coreui/react\";\n\nimport UserServices from \"../../../../services/user.services\";\nconst fields = [\"username\", \"email\", \"action\"];\n\nconst ApproveUsers = () => {\n  const [notApprovedUsers, setNotApprovedUsers] = useState(null);\n\n  const [modal, setModal] = useState(false);\n  const [modalType, setModalType] = useState(\"\");\n  const [modalMessage, setModalMessage] = useState(\"\");\n  const [modalButton, setModalButton] = useState(\"\");\n\n  const [token, setToken] = useState(\"\");\n  const [userId, setUserId] = useState(\"\");\n\n  const [alertType, setAlertType] = useState(null);\n  const [alertMessage, setAlertMessage] = useState(null);\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  const getAlluser = () => {\n    setIsLoading(false);\n    UserServices.getAllUsers().then(res => {\n      const users = res.data.data.users.rows;\n      const filteredUsers = users.filter(user => user.isApproved === false);\n      setNotApprovedUsers(filteredUsers);\n    });\n  };\n\n  const modalHandler = (type, verifiedToken, id = null) => {\n    setModal(!modal);\n    setModalType(type);\n    setToken(verifiedToken);\n    setUserId(id);\n\n    if (type === \"danger\") {\n      setModalMessage(\"Reject this user?\");\n      setModalButton(\"Reject\");\n    } else {\n      setModalMessage(\"Approve this user?\");\n      setModalButton(\"Approve\");\n    }\n  };\n\n  const approveRejectHandler = () => {\n    setModal(!modal);\n    if (modalType === \"danger\") {\n      UserServices.deleteUser(userId)\n        .then(res => {\n          getAlluser();\n          setAlertType(\"success\");\n          setAlertMessage(\"Delete user successfully\");\n        })\n        .catch(err => {\n          setAlertType(\"danger\");\n          setAlertMessage(\"An error has occured\");\n        });\n    } else {\n      UserServices.approveUser(token)\n        .then(res => {\n          getAlluser();\n          setAlertType(\"success\");\n          setAlertMessage(\"Approve user successfully\");\n        })\n        .catch(() => {\n          setAlertType(\"danger\");\n          setAlertMessage(\"An error has occured\");\n        });\n    }\n  };\n\n  useEffect(() => {\n    getAlluser();\n  }, []);\n\n  return (\n    <>\n      <CRow>\n        <CCol>\n          {isLoading && <CSpinner color=\"info\" />}\n          <CCard>\n            <CCardHeader\n              style={{\n                backgroundColor: \"#6C63FF\",\n                color: \"white\",\n                fontWeight: \"600\",\n                borderRadius: \"10px 10px 0 0\",\n                marginTop: \"-10px\"\n              }}\n            >\n              Approve Users\n            </CCardHeader>\n            <CCardBody>\n              {alertType && (\n                <CAlert color={alertType} closeButton>\n                  {alertMessage}\n                </CAlert>\n              )}\n              <CDataTable\n                items={notApprovedUsers}\n                fields={fields}\n                bordered\n                itemsPerPage={5}\n                pagination\n                scopedSlots={{\n                  action: item => (\n                    <td>\n                      <CButton\n                        shape=\"pill\"\n                        color=\"success\"\n                        size=\"sm\"\n                        className=\"mx-1 px-3\"\n                        onClick={() =>\n                          modalHandler(\"success\", item.verifiedToken)\n                        }\n                      >\n                        Approve\n                      </CButton>\n                      <CButton\n                        shape=\"pill\"\n                        color=\"danger\"\n                        size=\"sm\"\n                        className=\"mx-1 px-3\"\n                        onClick={() => modalHandler(\"danger\", null, item.id)}\n                      >\n                        Reject\n                      </CButton>\n                    </td>\n                  )\n                }}\n              />\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n\n      {/* Modal */}\n      <CModal\n        size=\"sm\"\n        show={modal}\n        onClose={() => setModal(!modal)}\n        color={modalType}\n      >\n        <CModalBody className={`text-${modalType} text-center`}>\n          <h4>{modalMessage}</h4>\n        </CModalBody>\n        <CModalFooter>\n          <CButton color={modalType} onClick={approveRejectHandler}>\n            {modalButton}\n          </CButton>{\" \"}\n          <CButton color=\"secondary\" onClick={() => setModal(!modal)}>\n            Cancel\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </>\n  );\n};\n\nexport default ApproveUsers;\n"],"sourceRoot":""}